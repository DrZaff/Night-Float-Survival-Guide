// UC Night Float Survival Guide
// Data extracted from the provided DOCX and rendered as offline-capable sections.

const APP_TITLE = "UC Night Float Survival Guide";
const SECTIONS = [{"title": "Antiemetics", "html": "<p>Common agents: Check last EKG for QTc</p>\n<p>Zofran 4mg IV/PO q6hrs prn</p>\n<p>Phenergan 12.5-25mg PO/IV/IM q6 hrs prn</p>\n<p>Compazine 5-10mg PO/IV/IM q6-8 hrs prn</p>\n<h3>Others</h3>\n<p>Diphenhydramine 25-50 mg PO q 6 or 10 mg IV q 6</p>\n<p>Scopolamine 1.5 mg patch q 72 hr - uses: preventative</p>\n<p>Lorazepam - uses: refractory nausea</p>\n<p>Dexamethasone - uses: prophylactic, chemotherapy-related</p>"}, {"title": "Abdominal Pain", "html": "<h3>Assessing Abdominal Pain</h3>\n<p>Is this new or old, is it worsening?</p>\n<p>If new or worsening, go see and evaluate patient</p>\n<p>What are the vitals?</p>\n<p>Why is the patient admitted?</p>\n<h3>Differential Guide by Location</h3>\n<p>Diffuse: Peritonitis</p>\n<p>Mimics: Diabetic Ketoacidosis, Adrenal Insufficiency</p>\n<p>Epigastric: PUD, pancreatitis, gastritis, AAA</p>\n<p>Mimics: Myocardial Infarction</p>\n<p>RUQ: cholecystitis, biliary colic, cholangitis, hepatitis</p>\n<p>Mimics: PE, pulmonary infarction, pneumonia, rib fracture</p>\n<p>LUQ: Gastritis, pancreatitis, ovarian torsion, ectopic pregnancy</p>\n<p>Mimics: splenic infarction, rib fracture</p>\n<p>RLQ: Appendicitis, ureteral kidney stone, hernia, ovarian torsion, ectopic pregnancy, constipation</p>\n<p>LLQ: Diverticulitis, ureteral kidney stone, hernia</p>\n<p>Suprapubic: Cystitis, bladder outlet obstruction</p>\n<h3>Urgent diagnoses requiring surgical consultation and co-management</h3>\n<p>Peritonitis: severe pain with +rebound, +guarding, absent bowel sounds. Upright abdominal imaging with +free air.</p>\n<p>Ischemic bowel: pain out of proportion to exam, +bloody stool.</p>\n<p>Abdominal Aortic Aneurysm: severe pain, large pulsatile mass, hypotension</p>\n<p>Obstruction: nausea, vomiting, bloat/distention. AXR with air-fluid levels and transition point</p>\n<p>Cholangititis: Fever, RUQ pain, jaundice (+/- hypotension and AMS). LFTs in cholestatic pattern.</p>\n<p>Work up</p>\n<p>Consider CBC, Lactate, Lipase, LFTs, UA, Abdominal XR, CT versus ultrasound (cannot be done overnight)</p>\n<p>*If surgical evaluation warranted, consider holding narcotic administration until surgical team has performed bedside exam.</p>"}, {"title": "Adults with Medical Complexity", "html": "<p>Adults with medical complexity typically have complex, chronic medical conditions associated with use of medical technology and increased need for care coordination.</p>\n<p>We are seeing more adults with medical complexity as they outgrow their pediatric team, please use these one-pagers as a reference! (Med-peds attendings are a great resource in a pinch!)</p>"}, {"title": "Altered Mental Status", "html": "<p>Calls regarding a change in mental status always warrant prompt notification of your senior and bedside evaluation of the patient.</p>\n<p><strong>Step 1.</strong> Determine urgency of call – Gather some specifics from nurse. Essential questions include: What has changed? What is the patient’s general appearance/status currently? Last time seen normal? New set of vitals?</p>\n<p>If patient acutely non-responsive, reasonable to ask nurse to call a rapid/code (582-3333). If patient is flipping through TV channels and only seemed slightly forgetful, have time to gather more information. If there is ANY concern for possible stroke, call a rapid response 1st, then initiate Stroke Team (584-8282).</p>\n<p><strong>Step 2.</strong> Information gathering – Review signout, H&amp;P and most recent progress note can be helpful, meds (anti-cholingergics? Opioids? Benzos?), labs. Finally, obtain new vitals if not already done and perform bedside exam with focus on mental status and neuro exam.</p>\n<p><strong>Step 3.</strong> Differential and diagnostic testing – Focus diagnostic testing on most common and life threatening causes of delirium. Below is a limited list to get you started.</p>\n<p>Drugs – Evidence of illicit drug use? opioids, benzos, anti-cholinergics? Any new meds?</p>\n<p>Electrolyte/metabolic disturbances</p>\n<p>Lack of drugs – alcohol/benzo withdrawl?</p>\n<p>Infection – UTI? Pneumonia? Cellulitis? Bacteremia?</p>\n<p>Reduced sensory inputs – Glasses? Hearing aids?</p>\n<p>Intracranial disorders – new focal deficits?</p>\n<p>Urinary and fecal disorders – Urinary retention? Constipation?</p>\n<p>Myocardial/pulmonary disorders – MI, COPD, HF, etc?</p>\n<p>Diagnostic tests to consider: renal panel, CBC, urinalysis +/- culture, hepatic panel, urine drug screen, blood gas, blood cultures, ECG, CXR, head CT.</p>"}, {"title": "Agitation", "html": "<p>What should I do if my patient is agitated with aggression?</p>\n<p>Can call if a code violet if patient is an imminent threat to self or others</p>\n<h3>Otherwise, try de-escalation techniques</h3>\n<h3>Reorient</h3>\n<p>Do not argue with patient, be respectful</p>\n<p>Involve family if possible, even over phone</p>\n<p>Initiate &quot;Sleep Care Bundle&quot; orderset to prevent and treat delirium</p>\n<p>Is the patient easily reoriented and redirectable? Would a Telesitter or Sitter work?</p>\n<p>Physical restraints and pharmacologic sedation – Only appropriate if patient is exhibiting behavior that is dangerous to the patient or others. Examples of dangerous behavior can include pulling at lines, tubes, and drains.</p>\n<h3>Pharmacologic options</h3>\n<p>Antipsychotics are the preferred agent. Start with low dose. Before administration, review ECG or obtain ECG to check QTc. QTc prolongation is a relative contraindication for administration of anti-psychotics. Below is some general information regarding the most commonly used anti-psychotics:</p>\n<h3>Haloperidol</h3>\n<p>Initial dose: 0.25 - 0.5 mg</p>\n<p>Routes: Oral, IM, or IV (IV associated with greater QTc prolongation, avoid)</p>\n<p>Degree of sedation: Low</p>\n<p>Risk of extrapyramidal symptoms: High</p>\n<h3>Risperidone</h3>\n<p>Initial dose: 0.25 - 0.5 mg</p>\n<p>Routes: Oral, IM</p>\n<p>Degree of sedation: Low</p>\n<p>Risk of extrapyramidal symptoms: High</p>\n<h3>Olanzapine</h3>\n<p>Initial dose: 2.5 - 5 mg</p>\n<p>Routes: Oral, sublingual, IM</p>\n<p>Degree of sedation: Moderate</p>\n<p>Risk of extrapyramidal symptoms: Moderate</p>\n<h3>Quetiapine</h3>\n<p>Initial dose: 12.5 - 25 mg</p>\n<p>Routes: Oral</p>\n<p>Degree of sedation: High</p>\n<p>Risk of extrapyramidal symptoms: Low</p>\n<p>Source for meds: Marcantonio, Edward R. &quot;Delirium in hospitalized older adults.&quot; New England Journal of Medicine 377.15 (2017): 1456-1466</p>\n<p>Benzodiazepines should be avoided as the amnestic effect of benzos will tend to worsen delirium, but may have to be used in some circumstances.</p>\n<p>Patient should be seen and plan reviewed with senior prior to administration of any new meds.</p>"}, {"title": "AMA", "html": "<p>Discharge Against Medical Advice (AMA) is when a patient chooses to leave the hospital before the medical team recommends discharge.</p>\n<h3>Notify Senior Resident</h3>\n<p>See patient quickly as they may elope</p>\n<p>Confirm patient has medical capacity</p>\n<p>Attempt to identify motivation for leaving and address if possible.</p>\n<p>Obtain AMA form from HUC or bedside RN.</p>\n<p>Explain to patient potential consequences of leaving prior to completion of treatment. Obtain teach-back from patient. Have patient sign form. Remove all lines.</p>\n<p>Document your conversation. If capacity exam was necessary, use .capacity template.</p>"}, {"title": "Arrhythmias", "html": "<p>Arrythmias are common and range from benign to life threatening. Even the non-life threatening rhythms may be a clue to something else going on with the patient (Electrolytes, Acidosis, EP issue, Hypoxia, PE, infection).</p>\n<p>Tachycardia: HR&gt;100 includes Atrial Fib, NSVT, Vtach, Vfib, SVT.</p>\n<p><strong>Step 1:</strong> Get a ECG, vital and get on a heart monitor if unstable vitals call rapid response.</p>\n<p>Important ECG points: Don’t over analyze. Is it Wide or Narrow? Regular or Irregular</p>\n<p>If Vtach or Vfib this is a CODE make sure pads in place and shock following ACLS</p>\n<p><strong>Step 2:</strong> Examine patient and determine if they are symptomatic or asymptomatic. If symptomatic call Senior and Rapid</p>\n<p><strong>Step 3:</strong> Review labs and history. Consider repeating labs including CBC, Renal panel, Troponin</p>\n<p><strong>Step 4:</strong> Circle back review telemetry. If necessary move to higher level of care.</p>\n<p>Non-Sustained V-Tach: 3 or more consecutive ventricular beats, rate &gt;100, Duration less than 15-30 seconds. Follow steps listed above and make sure to replete electrolytes. Usually tolerated well until high burden. Rule out MI, Hypoxia, Anemia. May require EP evaluation/Structural heart disease if persistent</p>\n<p>Sinus Tachycardia: Most important point is to find the cause. Check for bleeding, infection, hypoxia, MI, pain. If patient symptomatic or unstable the rate should be controlled. Can start with IV Metoprolol if stable. If patient is not stable more urgent rate control should be performed with Adenosine or Electrical cardioversion. If unstable call senior and call rapid.</p>\n<p>Atrial Fibrillation and Atrial fibrillation with RVR: It is important to know if patient has a history of the rhythm. Review their chart looking for past ECGs, anticoagulation etc. If new onset or new start of paroxysmal check for possible reversible causes including electrolytes, infection, bleeding. Are they due for their home dose of metoprolol?</p>\n<p>If new consider anticoagulation if not-contraindicated</p>\n<p>Correct electrolytes, treat infection, treat hypoxia, check Hgb</p>\n<p>If hemodynamically unstable call rapid response and prepare for electrical cardioversion</p>\n<p>Do not need to urgently cardiovert unless unstable this includes both chemical and electrical cardioversion. If considering chemical cardioversion with digoxin, diltiazem or amiodarone discuss with senior and review patient history with special attention to history of heart failure.</p>\n<p>For Atrial fib with RVR once underlying causes are ruled out can try IV metoprolol q 5 minutes x 3 for rate control. If not controlling rate discuss with senior</p>\n<p>Bradycardia: HR &lt;50 data-preserve-html-node=&quot;true&quot; data-preserve-html-node=&quot;true&quot; data-preserve-html-node=&quot;true&quot; data-preserve-html-node=&quot;true&quot; includes sinus bradycardia and heart block</p>\n<p><strong>Step 1:</strong> Place on heart monitor and get an ECG. If patient is unstable or symptomatic place pads on patient bring crash cart into the room and call a rapid response. Once senior available can consider cutaneous pacing or Atropine (0.5 mg push every 3-5 minutes up to 3mg Total)</p>\n<p><strong>Step 2:</strong> Look for reversible causes including medications, hypoxia, hypothyroidism, hypothermia and correct as able</p>\n<p><strong>Step 3:</strong> place on telemetry and evaluate need to move to higher level of care. Can keep pads on patient if highly concerned and have Atropine at bedside.</p>\n<p>Heart Block: If called for bradycardia and heart block seen on ECG. Review ECG with Senior.</p>\n<p>Rule out ischemia if new</p>\n<p>1st Degree and Mobitz 1 are typically benign and can be monitored</p>\n<p>Mobitz 2 or complete heart block require pacemaker placement. In mean time have pads on patient and atropine at bedside. Consult Cardiology consider transferring to higher level of care.</p>"}, {"title": "Chest Pain", "html": "<h3>Acute Coronary Syndrome</h3>\n<h3>Pulmonary Embolism</h3>\n<h3>Unstable Angina</h3>\n<h3>Aortic Dissection</h3>\n<h3>Pneumothorax</h3>\n<h3>GERD</h3>\n<h3>PNA</h3>\n<h3>Esophageal Spasm</h3>\n<h3>Musculoskeletal</h3>\n<p><strong>Step 1:</strong> Get the CURRENT vitals from the nurse. Also review patients reason for admission and if they have received any medicine yet for their chest pain.</p>\n<p><strong>Step 2:</strong> Go see the patient. Check vitals again. Get a ECG or order it before you walk to the patients room. Ask the patient important questions (location, duration, type, radiation). Review patient medical history especially cardiac and most recent lab work</p>\n<p>Orders: After getting story and evaluating patient consider ordering CXR, Troponin, ABG. Review ECG with senior or cards Fellow.</p>\n<p>Cardiac in nature or high concerning PMHx: Remember MONA (Morphine, Oxygen, Nitrates, Aspirin (325mg)). Sublingual Nitro can be attempted every 2-5 minutes as long as BP tolerates (Remember inferior MI). If pain unremitting and considering Nitro drip but not on appropriate floor consider Nitro Paste in the interim.</p>\n<p>Further Treatment: Heparin drip, Plavix, Beta blocker once discussed with senior and Cardiology.</p>\n<p>Other causes: It is important to consider other causes</p>\n<p>Pulmonary Embolism: can get ABG and check A-a gradient and order CTPA. Discuss with Senior and check renal function. If high enough suspicion can start Heparin drip prior to imaging or if imaging cannot be done if not contraindicated</p>\n<p>Aortic Dissection: CT chest w/contrast. First step in management is controlling HR and BP</p>\n<p>Pneumothorax/Pneumonia: Be sure to review CXR yourself. If pneumothorax call ICU and begin transfer to appropriate level of care</p>\n<p>GERD: If confident other etiologies are less likely can give patient an antacid or GI cocktail and monitor for improvement</p>\n<p>Herpes Zoster: Examine patient’s skin for characteristic rash. This can be easily missed</p>"}, {"title": "Constipation", "html": "<p>Constipation: This is a common complaint in and out of the hospital. A bowel regimen should be considered in anyone in the hospital or is at risk to develop constipation. Risk factors include:</p>\n<ul>\n<li>Opioids and other medications ·Dehydration ·Neurologic disorders ·Immobility ·Infection</li>\n</ul>\n<p><strong>Step 1:</strong> Review patient for history of constipation or use of laxatives at home. Also check for risk factors for constipation during the hospital stay and med list for medications that could be contributing to constipation</p>\n<p><strong>Step 2:</strong> Quickly assess for alarm symptoms including blood in stool, weight loss, severe abdominal pain, sudden development of constipation. If patient has severe abdominal pain and concerning exam get KUB and exam for possible ileus or SBO.</p>\n<p><strong>Step 3:</strong> selecting a treatment</p>\n<p>Promote regularity: Minimize medications that could be causing constipation, correct electrolytes, and promote activity if patient able to walk halls or sit up in a chair</p>\n<p>Osmotic Laxative: initial first step. Most well studied is miralax or low dose polyethylene glycol (PEG). Well tolerated. Other options include lactulose in studies does reduce need for additional laxatives but was less effective then low dose PEG. Magnesium hydroxide should be avoided</p>\n<h3>Treatment Options</h3>\n<h3>Colace 100mg PO BID/QID prn</h3>\n<h3>Tap Water Enema</h3>\n<h3>Soap Suds Enema</h3>\n<p>Mag Citrate ½ to 1 bottle (Strong)</p>\n<h3>Glycerine Suppository</h3>\n<h3>Dulcolax Suppository 5-10mg PO/PR QD (Strong)</h3>"}, {"title": "Electrolyte Replacement", "html": "<p>Goals (Especially important in cardiology patients)</p>\n<p>Potassium = 4\nPhosphorus = 3\nMagnesium = 2</p>\n<h3>Order Set</h3>\n<h3>ICU Electrolyte Protocol</h3>\n<h3>Replacing Potassium</h3>\n<p>Give PO if able - can split 40 mEq doses q1-2h if need more than 40mEq</p>\n<p>Be cautious in replacement in patient&#x27;s with CKD or AKIs</p>\n<p>Unable to give &gt;10 meq IV per hour through PIV as it is a caustic medication</p>\n<p>10mEq replacement PO/IV = 0.1 change in serum potassium</p>\n<h3>Replacing Magnesium</h3>\n<p>Can be given PO, may cause diarrhea</p>\n<p>500-1000 mg per dose, up to TID or IV 1-4 g per dose.</p>\n<p>Expect approximately a 0.1 increase in Mg levels for every gram given IV.</p>\n<p>The max you can give in a single IV dose is 4g if the Mg is &lt; 1.5.</p>\n<h3>Replacing Phosphorus</h3>\n<p>Can be given via PO or IV routes, equally effective</p>\n<p>PO dosing is 500 mg BID – TID</p>\n<p>IV dose is 10 mmol IV x 1, repeat as needed</p>\n<p>Avoid KPhos if the Potassium is high, contains 7mEq K</p>\n<p>Avoid NaPhos if hypernatremic, contains 7mEq Na</p>\n<h3>Replacing Calcium</h3>\n<p>Remember that calcium needs to be corrected for the patient’s albumin:</p>\n<p>Ca = serum Ca + 0.8 mg/dL for every 1 g/dL of albumin &lt; 4.0</p>\n<p>Can check ionized calcium for true level independent of albumin</p>\n<p>1 gram of CaCl(13.6 mEq of elemental Ca) or 1 gram Ca gluconate (approx. 4.5 mEq of elemental Ca) are acceptable IV preparations, noting the difference in strengths.</p>"}, {"title": "Fever", "html": "<p>This is a broad topic. What do you do if you get called with a fever? Think about the following:</p>\n<p>Is this a new fever or old, is there a known source?</p>\n<p>Infection: Does the patient have a CXR? UA? BCx?</p>\n<p>Are they already being treated?</p>\n<p>If patient worsening, what is not being covered by current ABx?</p>\n<p>Treat it with tylenol prn</p>\n<h3>Fever is not always infectious</h3>\n<p>Central fever? Thyroid? Medications? PE? NMS/Serotonin Syndrome? Rheumatologic cause? Malignancy?</p>"}, {"title": "Pain Control", "html": "<h3>Assessing Pain</h3>\n<p>Is this new pain or worsening pain or is it chronic pain?</p>\n<p>Where is the pain, what is the cause?</p>\n<p>Do I need to see this patient?</p>\n<p>What does the signout say about giving pain medications?</p>\n<p>What does the patient have as options, are they receiving opiates already? If yes, what is their tolerance?</p>\n<p>Consider multimodal pain thereapy</p>\n<h3>Treating Pain</h3>\n<h3>Opiates</h3>\n<h3>Doses</h3>\n<p>Oxycodone: 2.5mg to 15mg PO doses q4-6h prn, start low with elderly patients</p>\n<p>Morphine: 2-4mg IV q4h prn</p>\n<p>Dialudid: 0.5 - 1mg IV q4h prn</p>\n<p>Onset: 15-30minutes</p>\n<p>Clearance: Renal, some hepatic</p>\n<h3>Tramadol</h3>\n<p>Dose: 25-50mg PO q6h prn</p>\n<p>Onset: 1 hour</p>\n<p>Clearance: Renal, Hepatic</p>\n<h3>Tylenol</h3>\n<p>500-1,000mg PO q6h</p>\n<p>Max Dose: 4gm/day, 2gm/day in cirrhotics, avoid in acute liver injury</p>\n<h3>NSAIDs</h3>\n<h3>Doses</h3>\n<p>Ibuprofen: 200-800mg PO q6h prn, max 3200mg/day</p>\n<p>Ketorolac: 15mg IV q6h prn, limit max 5 days of treatment</p>\n<h3>Cautions</h3>\n<p>Renal Dysfunction - do not use!</p>\n<p>GIB Risk - do not use!</p>\n<p>Can cause fluid retention in CHF patients</p>\n<h3>Topical</h3>\n<p>These are often underutilized!!</p>\n<h3>Options</h3>\n<h3>Lidocaine Patch</h3>\n<h3>Capsaicin</h3>\n<p>Diclofenac gel</p>"}, {"title": "Hyperglycemia", "html": "<p>Assessing hyperglycemia</p>\n<p>How high is the sugar?</p>\n<p>Are they symptomatic?</p>\n<p>Where have previous sugars been? What is the trend of sugars?</p>\n<p>What is their diet, are they eating, are they NPO in the am for a procedure?</p>\n<p>Last insulin dose? What kind of insulin? Avoid stacking doses.</p>\n<p>Is there a precipitant? doses of insulin held, inadequate insulin dosing, sepsis, nonadherence to consistent carbohydrate diet?</p>\n<h3>Treatment</h3>\n<p>Look at total daily dose to evaluate insulin sensitivity</p>\n<p>Consider giving short acting or regular insulin SQ if sugars are significantly elevated, again, avoid stacking insulin</p>\n<p>Sign out to am team that patient required additional insulin and daily dosing may need to change</p>"}, {"title": "Hypoglycemia", "html": "<p>Assess symptoms (mental status is most important)</p>\n<p>Is hypogycemic protocol ordered?</p>\n<p>If able to take PO, give 4 ounces of juice</p>\n<p>If unable to take PO, give 1 amp of D50 IV</p>\n<p>If symptomatic and no IV access, give glucagon 1.0 mg SQ or IM</p>\n<p>Why are they hypoglycemic?</p>\n<p>NPO, insulin dosing too high, sepsis, decreased PO intake, renal insufficiency, reactive post-prandial, EtOH, liver disease, adrenal insufficiency, hypopituitarism, adrenal insufficiency, severe malnutrition?</p>\n<p>Do you need to start D5 or D10 drip? (D20 or higher must be given through central access)</p>"}, {"title": "Hyperkalemia", "html": "<h3>Assessing Hyperkalemia</h3>\n<p>Is the specimen hemolyzed?</p>\n<p>Does the lab make sense? Is there a reason for hyperkalemia? If not obvious, recheck.</p>\n<h3>If real, STAT EKG</h3>\n<p>Peaked T-waves with shortened QT interval</p>\n<p>Lengthening of the PR interval and QRS duration</p>\n<p>P wave disappear</p>\n<h3>Management</h3>\n<p>Calcium gluconate: 1gm over 2-3 minutes for cardiac protection. Recheck EKG 30 minutes later, do EKG changes persist?</p>\n<p>Insulin: 10 units IV regular insulin with D50 1 amp (consider dose decrease if AKI)</p>\n<p>Kayexalate: 15-45 grams PO or as enema</p>\n<p>Does this patient need dialysis</p>\n<p>Identify causes: renal insufficiency, medications, acidosis, type 4 RTA, tissue destruction (i.e. rhabdo, tissue infarction, hemolysis)</p>"}, {"title": "Hypertenion", "html": "<h3>Definitions</h3>\n<p>HTN Urgency: SBP &gt;180 or DBP &gt;120 without symptoms or end-organ damage</p>\n<p>HTN Emergency: Elevated BP with signs of acute end-organ damage</p>\n<p>End-organ damage: headache, vision change, papilledema, mental status change, chest pain, EKG changes, shortness of breath, pulmonary edema on CXR, and acute elevation of Cr on BM</p>\n<h3>What to consider</h3>\n<p>Is the patient symptomatic?</p>\n<p>Is this acute or chronic?</p>\n<p>Etiology: Related to pain? Anxiety or agitation? Cerebral injury? Progression of essential HTN? Autonomic dysfunction?</p>\n<h3>Initial steps</h3>\n<p>Review BP trend in chart</p>\n<p>Review I/O in chart</p>\n<p>Review Med-Rec and MAR to see if anti-HTN therapy was missed</p>\n<p>Go see the patient and perform cardiac, pulm, and neuro exam</p>\n<p>Ask MA or RN to check bilateral manual BP with appropriately sized cuff</p>\n<p>Check EKG, BMP, CXR, and CT head as indicated based on clinical context, symptoms, and exam</p>\n<h3>Treatment Goals</h3>\n<p>HTN Urgency: decrease BP in hours with PO agents</p>\n<p>HTN Emergency: decrease MAP by 25% within min to 2 hours with IV agents</p>\n<h3>Treatment Options for Uncontrolled HTN</h3>\n<p>If pre-existing HTN, then consider restarting home anti-HTN meds +/- intensify dose</p>\n<p>If new diagnosis of HTN, then initiate therapy based on pt demographics and co-existing conditions (DM, CKD, HF, ischemic heart disease, etc). In general, thiazide, CCB, or ACEi</p>\n<p>If due to pain, nausea, anxiety, or agitation, then address accordingly</p>\n<h3>Treatment Options for HTNsive Emergency (IV agents)</h3>\n<p>Nicardipine: Use for AKI; Contraindicated (CI) in advanced aortic stenosis</p>\n<p>Nitroprusside: Use in HTN Encephalopathy; Tachyphylaxis and cyanide poisoning with extended use</p>\n<p>Nitroglycerin: Use in cardiac ischemia and pulmonary edema; Do NOT use if pt is taking PDE-5 inhibitor</p>\n<p>Labetalol and esmolol: Use in CVA, aortic dissection, and ACS; Do NOT use if bradycardia or 2nd or 3rd degree block; May worsen HF. Do NOT use if HTNsive emergency with pulmonary edema as this is acute decompensated CHF. Labetalol is CI in asthma and COPD</p>\n<p>Hydralazine: NOT first line due to unpredictable response with IV and prolonged duration (2-4 h), causes rebound tachycardia</p>"}, {"title": "Hypotension", "html": "<p>Always notify your senior resident when you are called for any hypotensive event.</p>\n<h3>Definitions</h3>\n<p>Relative Hypotension: drop in SBP &gt; 40 mmHg</p>\n<p>Absolute Hypotension: SBP &lt; 90 or MAP &lt; 65</p>\n<p>Shock: state of insufficient perfusion and oxygen delivery to tissues</p>\n<h3>What to consider</h3>\n<p>This is urgent and takes top priority</p>\n<p>Is hypotension associated with signs of decreased tissue perfusion?</p>\n<p>Is this sepsis (qSOFA (+) or SIRS (+) with suspected source)?</p>\n<p>Other etiologies of shock: distributive, hypovolemic, cardiogenic, obstructive</p>\n<p>SIRS Criteria (2 of 4)</p>\n<p>Temp &gt; 38 or &lt; 36 C</p>\n<p>HR &gt; 90</p>\n<p>RR &gt; 20 or PaCO2 &lt; 32</p>\n<p>WBC &gt;12, &lt;4, data-preserve-html-node=&quot;true&quot; data-preserve-html-node=&quot;true&quot; data-preserve-html-node=&quot;true&quot; data-preserve-html-node=&quot;true&quot; data-preserve-html-node=&quot;true&quot; or &gt;10% bands)</p>\n<p>qSOFA Criteria (2 of 3)</p>\n<p>SBP ≤ 100 mmHg</p>\n<p>RR &lt; 22</p>\n<p>AMS (GCS &lt; 15)</p>\n<h3>What to do</h3>\n<p>Tell the senior immediately</p>\n<p>Go see the patient</p>\n<p>If concerned for shock and etiology is undifferentiated, then check the following:</p>\n<p>Lactate, CMP, troponin, BNP, CBC with diff, PT/INR, VBG, cortisol</p>\n<h3>EKG</h3>\n<h3>CXR</h3>\n<h3>Treatment</h3>\n<p>Volume resuscitation. Be cautious if there is cardiac dysfunction. Check last known LVEF.</p>\n<p>If persistent, rapid or discuss with MICU fellow for upgaded level of care</p>"}, {"title": "Insomnia", "html": "<h3>Melatonin 3mg PO QHS</h3>\n<p>Benadryl 25-50mg PO qhs prn (Don’t use in BPH)</p>\n<p>Is patient appropriate for sleep bundle?</p>"}, {"title": "Shortness of Breath", "html": "<p>Always notify your senior resident when you are called for any acute respiratory event. If you need additional support (RN, respiratory, AOD), do not hesitate to call a rapid response.</p>\n<p>Determine urgency</p>\n<p>Vitals, NC &gt; 6L is not appropriate for floor if new this admission</p>\n<p>Triage seeing a hypoxic patient as a #1 above other tasks.</p>\n<h3>Information Gathering</h3>\n<p>See patient</p>\n<p>Review signout and most recent progress note</p>\n<p>Review meds – can give clues to what is going on (COPD inhalers? Fluids? CHF meds?)</p>\n<p>Review most recent labs (history of hypercapnia? troponin elevation? elevated NT-proBNP?)</p>\n<p>Perform focused cardiopulmonary examination</p>\n<p>General: Awake or drowsy? Rash suspicious for anaphylaxis?</p>\n<p>HEENT: Evidence of angioedema?</p>\n<p>Pulmonary: Working of breathing? Speaking in full sentences? Crackles? Wheezing?</p>\n<p>Cardiac: Regular rhythm? Edema? JVD?</p>\n<p>Review continuous pulse oximetry to confirm good wave form (good “pleth”)</p>\n<p>Differential and diagnostic testing</p>\n<p>Cardiovascular: acute coronary syndrome, heart failure, tamponade, hypertensive emergency</p>\n<p>Pulmonary: Pulmonary embolism, pneumothorax, pneumonia, asthma/COPD, airway - obstruction (foreign body? angioedema? anaphylaxis?)</p>\n<p>Other: acute blood loss, acute chest syndrome, diabetic ketoacidosis</p>\n<p>Diagnostic tests to consider: ECG, CBC (other labs: troponin, BMP, NT-proBNP, ABG/VBG), CXR, beside echo, CTPA</p>\n<p>Determine disposition and implement interventions</p>\n<p>Can patient stay on floor? --&gt; New bipap and O2 &gt;6L from baseline must go to stepdown level of care.</p>\n<p>If patient is remaining on the floor, strongly consider telemetry monitoring and continuous pulse oximetry if not already implemented</p>"}];

document.addEventListener("DOMContentLoaded", () => {
  const homeView = document.getElementById("homeView");
  const sectionView = document.getElementById("sectionView");
  const searchInput = document.getElementById("searchInput");
  const backBtn = document.getElementById("backBtn");
  const sectionTitle = document.getElementById("sectionTitle");
  const sectionMeta = document.getElementById("sectionMeta");
  const sectionContent = document.getElementById("sectionContent");

  function escapeHtml(s) {
    return String(s)
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  function normalize(s) {
    return String(s || "").trim().toLowerCase();
  }

  function setHashForIndex(idx) {
    const url = new URL(window.location.href);
    if (idx === null || idx === undefined) {
      url.hash = "";
    } else {
      url.hash = `#section=${idx}`;
    }
    window.location.replace(url.toString());
  }

  function parseHash() {
    const h = window.location.hash || "";
    const m = h.match(/section=(\d+)/);
    if (!m) return null;
    const idx = Number(m[1]);
    if (!Number.isFinite(idx) || idx < 0 || idx >= SECTIONS.length) return null;
    return idx;
  }

  function showHome(filterText = "") {
    sectionView.classList.add("hidden");
    homeView.classList.remove("hidden");

    const ft = normalize(filterText);

    const filtered = SECTIONS
      .map((s, i) => ({ ...s, idx: i }))
      .filter(s => !ft || normalize(s.title).includes(ft));

    const total = SECTIONS.length;
    const shown = filtered.length;

    const listHtml = filtered.map(s => {
      const snippet = buildSnippetText(s.html, 120);
      return `
        <div class="section-card" role="button" tabindex="0" data-idx="${s.idx}">
          <h3 class="section-card-title">${escapeHtml(s.title)}</h3>
          <p class="section-card-sub">${escapeHtml(snippet)}</p>
        </div>
      `;
    }).join("");

    homeView.innerHTML = `
      <h2 class="card-title">Sections</h2>
      <p class="section-meta" style="margin:.35rem 0 .85rem;">Showing <strong>${shown}</strong> of <strong>${total}</strong></p>
      <div class="section-list">
        ${listHtml || `<div class="section-meta">No matches. Try a different search.</div>`}
      </div>
    `;

    // Click + keyboard
    homeView.querySelectorAll(".section-card").forEach(el => {
      const idx = Number(el.getAttribute("data-idx"));
      el.addEventListener("click", () => setHashForIndex(idx));
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          setHashForIndex(idx);
        }
      });
    });
  }

  function buildSnippetText(htmlString, maxLen) {
    const tmp = document.createElement("div");
    tmp.innerHTML = htmlString;
    const text = (tmp.textContent || "").replace(/\s+/g, " ").trim();
    if (!text) return "Tap to open";
    if (text.length <= maxLen) return text;
    return text.slice(0, maxLen - 1).trim() + "…";
  }

  function renderSection(idx) {
    const s = SECTIONS[idx];
    if (!s) {
      setHashForIndex(null);
      return;
    }

    homeView.classList.add("hidden");
    sectionView.classList.remove("hidden");

    sectionTitle.textContent = s.title;
    sectionMeta.textContent = `Section ${idx + 1} of ${SECTIONS.length}`;

    // Defensive: ensure any external links open safely (target + rel).
    const tmp = document.createElement("div");
    tmp.innerHTML = s.html;

    tmp.querySelectorAll("a").forEach(a => {
      a.setAttribute("target", "_blank");
      a.setAttribute("rel", "noopener noreferrer");
    });

    // Wrap any tables (if present) to avoid overflow.
    tmp.querySelectorAll("table").forEach(t => {
      const wrap = document.createElement("div");
      wrap.className = "table-wrap";
      t.parentNode.insertBefore(wrap, t);
      wrap.appendChild(t);
    });

    sectionContent.innerHTML = "";
    sectionContent.appendChild(tmp);

    // Scroll to top for "new page" feel.
    window.scrollTo({ top: 0, behavior: "instant" });
  }

  // --- Events --- //
  backBtn.addEventListener("click", () => {
    // If user came from within the SPA, history.back() feels natural.
    // If not, fall back to home.
    if (window.history.length > 1) {
      window.history.back();
    } else {
      setHashForIndex(null);
    }
  });

  searchInput.addEventListener("input", () => {
    showHome(searchInput.value);
  });

  searchInput.addEventListener("keydown", (e) => {
    if (e.key !== "Enter") return;
    const ft = normalize(searchInput.value);
    if (!ft) return;

    const matchIdx = SECTIONS.findIndex(s => normalize(s.title).includes(ft));
    if (matchIdx >= 0) setHashForIndex(matchIdx);
  });

  window.addEventListener("hashchange", () => {
    const idx = parseHash();
    if (idx === null) {
      showHome(searchInput.value);
    } else {
      renderSection(idx);
    }
  });

  // Initial render
  const initialIdx = parseHash();
  if (initialIdx === null) {
    showHome("");
  } else {
    renderSection(initialIdx);
  }
});
